# Guide

## java-spring-on-lambda

### sprig-boot 프로젝트 생성

#### 1. 루트 디렉토리에서 gradle init

```<bash>
mkdir java-spring-on-lambda
cd java-spring-on-lambda
gradle init
```

##### gradle 설정

언어 : java\n  
DSL : Groovy  
Test 등 나머지 사항 : default

```<bash>
Starting a Gradle Daemon (subsequent builds will be faster)

Select type of project to generate:
  1: basic
  2: application
  3: library
  4: Gradle plugin
Enter selection (default: basic) [1..4] 2

Select implementation language:
  1: C++
  2: Groovy
  3: Java
  4: Kotlin
  5: Scala
  6: Swift
Enter selection (default: Java) [1..6] 3

Generate multiple subprojects for application? (default: no) [yes, no] no
Select build script DSL:
  1: Kotlin
  2: Groovy
Enter selection (default: Kotlin) [1..2] 2

Select test framework:
  1: JUnit 4
  2: TestNG
  3: Spock
  4: JUnit Jupiter
Enter selection (default: JUnit Jupiter) [1..4]

Project name (default: java-spring-on-lambda):
Source package (default: java.spring.on.lambda):
Enter target version of Java (min. 7) (default: 18): 21
Generate build using new APIs and behavior (some features may change in the next minor release)? (default: no)


> Task :init
To learn more about Gradle by exploring our Samples at https://docs.gradle.org/8.5/samples/sample_building_java_applications.html

BUILD SUCCESSFUL in 1m 15s
2 actionable tasks: 2 executed
```

#### 2. 프로젝트 설정 확인

##### 프로젝트 구조 확인

```<bash>
tree .
.
├── app
│   ├── build.gradle
│   └── src
│       ├── main
│       │   ├── java
│       │   │   └── java
│       │   │       └── spring
│       │   │           └── on
│       │   │               └── lambda
│       │   │                   └── App.java
│       │   └── resources
│       └── test
│           ├── java
│           │   └── java
│           │       └── spring
│           │           └── on
│           │               └── lambda
│           │                   └── AppTest.java
│           └── resources
├── gradle
│   ├── libs.versions.toml
│   └── wrapper
│       ├── gradle-wrapper.jar
│       └── gradle-wrapper.properties
├── gradlew
├── gradlew.bat
└── settings.gradle
```

##### build.gradle 확인

```<bash>
cd app
cat build.gradle
/*
 * This file was generated by the Gradle 'init' task.
 *
 * This generated file contains a sample Java application project to get you started.
 * For more details on building Java & JVM projects, please refer to https://docs.gradle.org/8.5/userguide/building_java_projects.html in the Gradle documentation.
 */

plugins {
    // Apply the application plugin to add support for building a CLI application in Java.
    id 'application'
}

repositories {
    // Use Maven Central for resolving dependencies.
    mavenCentral()
}

dependencies {
    // Use JUnit Jupiter for testing.
    testImplementation libs.junit.jupiter

    testRuntimeOnly 'org.junit.platform:junit-platform-launcher'

    // This dependency is used by the application.
    implementation libs.guava
}

// Apply a specific Java toolchain to ease working on different environments.
java {
    toolchain {
        languageVersion = JavaLanguageVersion.of(21)
    }
}

application {
    // Define the main class for the application.
    mainClass = 'java.spring.on.lambda.App'
}

tasks.named('test') {
    // Use JUnit Platform for unit tests.
    useJUnitPlatform()
}
```

##### build.gradle을 아래와 같이 수정하자

springboot, aws-serverless, jdbc 등 의존성을 추가했다.

```<bash>
plugins {
    id 'application'
    id 'org.springframework.boot' version '3.1.6'
    id 'io.spring.dependency-management' version '1.1.4'
}

repositories {
    mavenCentral()
}

dependencies {
    implementation 'org.springframework.boot:spring-boot-starter'
    implementation libs.guava
    implementation 'com.amazonaws.serverless:aws-serverless-java-container-springboot3:2.0.0-M2'
    runtimeOnly 'com.mysql:mysql-connector-j'
}

java {
    toolchain {
        languageVersion = JavaLanguageVersion.of(21)
    }
}

application {
    mainClass = 'java.spring.on.lambda.App'
}
```
